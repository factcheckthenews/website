<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="shared-styles.html">

<dom-module id="score-card">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

      label {
        margin-right: 5px;
      }

      p {
        word-wrap: break-word;
      }
    </style>

    <div class="card" hidden="{{hidden}}">
      <h3>Summary</h3>
      <p><label>Article:</label>
        <a href="{{ result.url }}" target="_blank">{{ result.url }}</a>
      </p>

      <p><label>Score:</label>
        {{ result.score }}
      </p>

      <hr>

      <!-- HTTPS Score -->
      <template is="dom-if" if="{{ !result.criteria.https }}">
        <p><label>⚠️️</label>
        This content is insecure.
        Without using HTTPS, this content could be modified by a malicious 3rd party.
        </p>
      </template>

      <template is="dom-if" if="{{ result.criteria.https }}">
        <p><label>✅</label>
          This content is served using a secure connection.
        </p>
      </template>

      <!-- OpenSources Score -->
      <template is="dom-if" if="{{ result.criteria.opensources.flag }}">
        <p><label>⚠️️</label>
        This content has been flagged by <a href="http://www.opensources.co/">OpenSources</a>
        as {{ result.criteria.opensources.type }}.</p>
      </template>

      <template is="dom-if" if="{{ !result.criteria.opensources.flag }}">
        <p><label>✅</label>
          No issues have been reported.
          If you believe there are credibility issues with this source,
          please report them to <a href="http://www.opensources.co/">OpenSources</a>.
        </p>
      </template>
      
      <!-- End Report Card -->
    </div>
    
  </template>

  <script>
    Polymer({
      is: 'score-card',
      properties: {
        result: {
          type: Object,
          value: null
        },
        hidden: {
          type: Boolean,
          value: true
        }
      },
      makeVisible: function() {
        this.hidden = false
      },
      toggleVisibility: function() {
        this.hidden = !this.hidden;
      }
    });
  </script>
</dom-module>
